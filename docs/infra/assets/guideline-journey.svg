<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 1157.203125 3015.0078125" style="max-width: 1157.203125px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-svg-1756728940860-ifgix19qd"><style>#mermaid-svg-1756728940860-ifgix19qd{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd .error-icon{fill:#5a1d1d;}#mermaid-svg-1756728940860-ifgix19qd .error-text{fill:#f85149;stroke:#f85149;}#mermaid-svg-1756728940860-ifgix19qd .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-1756728940860-ifgix19qd .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-1756728940860-ifgix19qd .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-1756728940860-ifgix19qd .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-1756728940860-ifgix19qd .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-1756728940860-ifgix19qd .marker{fill:#cccccc;stroke:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd .marker.cross{stroke:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-1756728940860-ifgix19qd .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd .cluster-label text{fill:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd .cluster-label span,#mermaid-svg-1756728940860-ifgix19qd p{color:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd .label text,#mermaid-svg-1756728940860-ifgix19qd span,#mermaid-svg-1756728940860-ifgix19qd p{fill:#cccccc;color:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd .node rect,#mermaid-svg-1756728940860-ifgix19qd .node circle,#mermaid-svg-1756728940860-ifgix19qd .node ellipse,#mermaid-svg-1756728940860-ifgix19qd .node polygon,#mermaid-svg-1756728940860-ifgix19qd .node path{fill:#1f1f1f;stroke:#3c3c3c;stroke-width:1px;}#mermaid-svg-1756728940860-ifgix19qd .flowchart-label text{text-anchor:middle;}#mermaid-svg-1756728940860-ifgix19qd .node .label{text-align:center;}#mermaid-svg-1756728940860-ifgix19qd .node.clickable{cursor:pointer;}#mermaid-svg-1756728940860-ifgix19qd .arrowheadPath{fill:#e0e0e0;}#mermaid-svg-1756728940860-ifgix19qd .edgePath .path{stroke:#cccccc;stroke-width:2.0px;}#mermaid-svg-1756728940860-ifgix19qd .flowchart-link{stroke:#cccccc;fill:none;}#mermaid-svg-1756728940860-ifgix19qd .edgeLabel{background-color:#1f1f1f99;text-align:center;}#mermaid-svg-1756728940860-ifgix19qd .edgeLabel rect{opacity:0.5;background-color:#1f1f1f99;fill:#1f1f1f99;}#mermaid-svg-1756728940860-ifgix19qd .labelBkg{background-color:rgba(31, 31, 31, 0.5);}#mermaid-svg-1756728940860-ifgix19qd .cluster rect{fill:#3a3d41;stroke:#313131;stroke-width:1px;}#mermaid-svg-1756728940860-ifgix19qd .cluster text{fill:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd .cluster span,#mermaid-svg-1756728940860-ifgix19qd p{color:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:#616161;border:1px solid #0078d4;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-1756728940860-ifgix19qd .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#cccccc;}#mermaid-svg-1756728940860-ifgix19qd :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1756728940860-ifgix19qd_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1756728940860-ifgix19qd_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1756728940860-ifgix19qd_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1756728940860-ifgix19qd_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1756728940860-ifgix19qd_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Start LE-Process" id="L-Start-Process-0" d="M733.172,37.5L733.172,41.667C733.172,45.833,733.172,54.167,733.172,61.617C733.172,69.067,733.172,75.633,733.172,78.917L733.172,82.2"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Process LE-PrepIteration" id="L-Process-PrepIteration-0" d="M733.172,125L733.172,129.167C733.172,133.333,733.172,141.667,733.172,149.117C733.172,156.567,733.172,163.133,733.172,166.417L733.172,169.7"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-PrepIteration LE-Journey" id="L-PrepIteration-Journey-0" d="M693.672,201.228L661.739,207.273C629.807,213.319,565.941,225.409,534.075,234.821C502.208,244.234,502.34,250.967,502.406,254.334L502.472,257.701"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Journey LE-JourneyLLM" id="L-Journey-JourneyLLM-0" d="M567.333,361.15L632.54,377.901C697.747,394.652,828.162,428.154,893.369,450.064C958.576,471.973,958.576,482.29,958.576,487.448L958.576,492.606"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Journey LE-GuidelineMatch" id="L-Journey-GuidelineMatch-0" d="M469.94,393.27L462.18,404.667C454.421,416.065,438.903,438.861,431.144,464.717C423.385,490.573,423.385,519.49,423.385,546.531C423.385,573.573,423.385,598.74,430.107,615.06C436.83,631.381,450.274,638.856,456.997,642.593L463.719,646.331"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-JourneyLLM LE-GuidelineMatch" id="L-JourneyLLM-GuidelineMatch-0" d="M958.576,598.906L958.576,603.073C958.576,607.24,958.576,615.573,893.538,625.973C828.5,636.372,698.424,648.839,633.386,655.072L568.348,661.305"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-GuidelineMatch LE-BatchSelect" id="L-GuidelineMatch-BatchSelect-0" d="M502.076,686.406L502.076,690.573C502.076,694.74,502.076,703.073,502.076,710.523C502.076,717.973,502.076,724.54,502.076,727.823L502.076,731.106"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-BatchSelect LE-ObsBatch" id="L-BatchSelect-ObsBatch-0" d="M385.08,767.856L337.404,773.031C289.728,778.206,194.376,788.556,146.7,797.015C99.023,805.473,99.023,812.04,99.023,815.323L99.023,818.606"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-BatchSelect LE-ActionBatch" id="L-BatchSelect-ActionBatch-0" d="M436.137,773.906L421.484,778.073C406.831,782.24,377.525,790.573,362.872,798.023C348.219,805.473,348.219,812.04,348.219,815.323L348.219,818.606"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-BatchSelect LE-PrevAppliedBatch" id="L-BatchSelect-PrevAppliedBatch-0" d="M570.453,773.906L585.647,778.073C600.842,782.24,631.232,790.573,646.426,798.023C661.621,805.473,661.621,812.04,661.621,815.323L661.621,818.606"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-BatchSelect LE-DisamBatch" id="L-BatchSelect-DisamBatch-0" d="M619.072,766.186L676.915,771.64C734.758,777.093,850.443,788,908.286,796.736C966.129,805.473,966.129,812.04,966.129,815.323L966.129,818.606"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ObsBatch LE-ToolCheck" id="L-ObsBatch-ToolCheck-0" d="M99.023,902.406L99.023,906.573C99.023,910.74,99.023,919.073,150.934,942.179C202.845,965.285,306.666,1003.165,358.576,1022.104L410.487,1041.044"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ActionBatch LE-ToolCheck" id="L-ActionBatch-ToolCheck-0" d="M348.219,902.406L348.219,906.573C348.219,910.74,348.219,919.073,363.25,937.41C378.281,955.747,408.343,984.089,423.373,998.259L438.404,1012.43"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-PrevAppliedBatch LE-ToolCheck" id="L-PrevAppliedBatch-ToolCheck-0" d="M661.621,902.406L661.621,906.573C661.621,910.74,661.621,919.073,646.754,937.407C631.886,955.741,602.151,984.075,587.283,998.242L572.416,1012.409"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-DisamBatch LE-ToolCheck" id="L-DisamBatch-ToolCheck-0" d="M966.129,902.406L966.129,906.573C966.129,910.74,966.129,919.073,905.673,942.707C845.217,966.341,724.304,1005.275,663.848,1024.742L603.392,1044.209"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ToolCheck LE-ToolLLM" id="L-ToolCheck-ToolLLM-0" d="M583.143,1120.55L615.898,1139.462C648.652,1158.375,714.161,1196.199,746.915,1220.27C779.67,1244.34,779.67,1254.657,779.67,1259.815L779.67,1264.973"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ToolCheck LE-MessageGen" id="L-ToolCheck-MessageGen-0" d="M465.931,1158.784L459.856,1171.324C453.781,1183.864,441.631,1208.944,435.556,1237.817C429.48,1266.69,429.48,1299.357,429.48,1330.148C429.48,1360.94,429.48,1389.857,429.48,1418.68C429.48,1447.503,429.48,1476.232,429.48,1506.836C429.48,1537.44,429.48,1569.919,429.48,1595.326C429.48,1620.732,429.48,1639.065,429.48,1657.398C429.48,1675.732,429.48,1694.065,429.48,1722.138C429.48,1750.211,429.48,1788.023,429.48,1825.836C429.48,1863.648,429.48,1901.461,440.3,1926.001C451.12,1950.541,472.759,1961.808,483.579,1967.442L494.399,1973.076"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ToolLLM LE-ToolExec" id="L-ToolLLM-ToolExec-0" d="M779.67,1393.773L779.67,1397.94C779.67,1402.107,779.67,1410.44,779.736,1417.974C779.802,1425.507,779.934,1432.241,780,1435.608L780.066,1438.974"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ToolExec LE-RunTool" id="L-ToolExec-RunTool-0" d="M821.677,1525.141L848.927,1538.017C876.176,1550.894,930.675,1576.646,957.924,1594.681C985.174,1612.715,985.174,1623.032,985.174,1628.19L985.174,1633.348"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ToolExec LE-MessageGen" id="L-ToolExec-MessageGen-0" d="M751.808,1538.287L742.42,1548.972C733.033,1559.657,714.258,1581.028,704.87,1600.88C695.482,1620.732,695.482,1639.065,695.482,1657.398C695.482,1675.732,695.482,1694.065,695.482,1722.138C695.482,1750.211,695.482,1788.023,695.482,1825.836C695.482,1863.648,695.482,1901.461,678.701,1926.122C661.92,1950.784,628.358,1962.294,611.577,1968.049L594.795,1973.804"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-RunTool LE-IterCheck" id="L-RunTool-IterCheck-0" d="M985.174,1676.148L985.174,1682.19C985.174,1688.232,985.174,1700.315,992.617,1717.032C1000.061,1733.749,1014.948,1755.1,1022.391,1765.775L1029.834,1776.451"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-IterCheck LE-PrepIteration" id="L-IterCheck-PrepIteration-0" d="M1086.526,1771.159L1090.316,1761.365C1094.106,1751.572,1101.686,1731.985,1105.476,1713.025C1109.266,1694.065,1109.266,1675.732,1109.266,1657.398C1109.266,1639.065,1109.266,1620.732,1109.266,1595.326C1109.266,1569.919,1109.266,1537.44,1109.266,1506.836C1109.266,1476.232,1109.266,1447.503,1109.266,1418.68C1109.266,1389.857,1109.266,1360.94,1109.266,1330.148C1109.266,1299.357,1109.266,1266.69,1109.266,1223.868C1109.266,1181.046,1109.266,1128.068,1109.266,1076.965C1109.266,1025.862,1109.266,976.634,1109.266,941.312C1109.266,905.99,1109.266,884.573,1109.266,863.156C1109.266,841.74,1109.266,820.323,1109.266,802.323C1109.266,784.323,1109.266,769.74,1109.266,755.156C1109.266,740.573,1109.266,725.99,1109.266,711.406C1109.266,696.823,1109.266,682.24,1109.266,667.656C1109.266,653.073,1109.266,638.49,1109.266,618.615C1109.266,598.74,1109.266,573.573,1109.266,546.531C1109.266,519.49,1109.266,490.573,1109.266,456.497C1109.266,422.422,1109.266,383.188,1109.266,345.828C1109.266,308.469,1109.266,272.984,1054.044,248.818C998.823,224.652,888.379,211.805,833.158,205.381L777.936,198.957"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-IterCheck LE-MessageGen" id="L-IterCheck-MessageGen-0" d="M1064.516,1903.523L1064.432,1909.482C1064.349,1915.44,1064.182,1927.357,986.077,1941.429C907.971,1955.5,751.926,1971.727,673.903,1979.84L595.881,1987.954"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-MessageGen LE-CannedCheck" id="L-MessageGen-CannedCheck-0" d="M535.109,2013.023L535.109,2017.19C535.109,2021.357,535.109,2029.69,535.175,2037.224C535.241,2044.757,535.373,2051.491,535.439,2054.858L535.505,2058.224"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CannedCheck LE-CannedDraft" id="L-CannedCheck-CannedDraft-0" d="M479.38,2252.904L466.279,2268.234C453.178,2283.563,426.976,2314.223,413.875,2334.711C400.773,2355.199,400.773,2365.516,400.773,2370.674L400.773,2375.833"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CannedCheck LE-DirectMessage" id="L-CannedCheck-DirectMessage-0" d="M606.531,2238.211L630.865,2255.99C655.198,2273.768,703.865,2309.326,728.198,2339.687C752.531,2370.049,752.531,2395.216,752.531,2418.508C752.531,2441.799,752.531,2463.216,752.531,2484.633C752.531,2506.049,752.531,2527.466,752.531,2548.883C752.531,2570.299,752.531,2591.716,752.531,2616.789C752.531,2641.862,752.531,2670.591,752.531,2701.195C752.531,2731.799,752.531,2764.279,752.531,2785.677C752.531,2807.074,752.531,2817.391,752.531,2822.549L752.531,2827.708"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CannedDraft LE-CannedSelect" id="L-CannedDraft-CannedSelect-0" d="M400.773,2459.633L400.773,2463.799C400.773,2467.966,400.773,2476.299,400.773,2483.749C400.773,2491.199,400.773,2497.766,400.773,2501.049L400.773,2504.333"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CannedSelect LE-CannedRevise" id="L-CannedSelect-CannedRevise-0" d="M400.773,2588.133L400.773,2592.299C400.773,2596.466,400.773,2604.799,400.839,2612.333C400.905,2619.866,401.038,2626.6,401.104,2629.967L401.17,2633.334"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CannedRevise LE-CannedCompose" id="L-CannedRevise-CannedCompose-0" d="M429.435,2732.846L438.506,2743.498C447.576,2754.15,465.718,2775.454,474.789,2791.264C483.859,2807.074,483.859,2817.391,483.859,2822.549L483.859,2827.708"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CannedRevise LE-FinalMessage" id="L-CannedRevise-FinalMessage-0" d="M373.112,2732.846L363.874,2743.498C354.637,2754.15,336.162,2775.454,326.925,2798.689C317.688,2821.924,317.688,2847.091,317.688,2870.383C317.688,2893.674,317.688,2915.091,335.279,2930.431C352.87,2945.771,388.052,2955.033,405.643,2959.665L423.234,2964.296"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CannedCompose LE-FinalMessage" id="L-CannedCompose-FinalMessage-0" d="M483.859,2911.508L483.859,2915.674C483.859,2919.841,483.859,2928.174,483.859,2935.624C483.859,2943.074,483.859,2949.641,483.859,2952.924L483.859,2956.208"/><path marker-end="url(#mermaid-svg-1756728940860-ifgix19qd_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-DirectMessage LE-FinalMessage" id="L-DirectMessage-FinalMessage-0" d="M752.531,2911.508L752.531,2915.674C752.531,2919.841,752.531,2928.174,717.874,2937.985C683.218,2947.795,613.904,2959.082,579.247,2964.725L544.59,2970.368"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(958.576171875, 461.65625)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g transform="translate(423.384765625, 548.40625)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(779.669921875, 1234.0234375)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g transform="translate(429.48046875, 1602.3984375)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(985.173828125, 1602.3984375)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g transform="translate(695.482421875, 1712.3984375)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1109.265625, 863.15625)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g transform="translate(1064.015625, 1939.2734375)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(400.7734375, 2344.8828125)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g transform="translate(752.53125, 2548.8828125)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(483.859375, 2796.7578125)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g transform="translate(317.6875, 2872.2578125)" class="edgeLabel"><g transform="translate(-8, -11.25)" class="label"><foreignObject height="22.5" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(733.171875, 18.75)" id="flowchart-Start-1806" class="node default default flowchart-label"><rect height="37.5" width="121.390625" y="-18.75" x="-60.6953125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-53.1953125, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="106.390625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">用户输入Query</span></div></foreignObject></g></g><g transform="translate(733.171875, 106.25)" id="flowchart-Process-1807" class="node default default flowchart-label"><rect height="37.5" width="111" y="-18.75" x="-55.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-48, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="96"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">引擎处理开始</span></div></foreignObject></g></g><g transform="translate(733.171875, 193.75)" id="flowchart-PrepIteration-1809" class="node default default flowchart-label"><rect height="37.5" width="79" y="-18.75" x="-39.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-32, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="64"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">准备迭代</span></div></foreignObject></g></g><g transform="translate(502.076171875, 343.953125)" id="flowchart-Journey-1811" class="node default default flowchart-label"><polygon style="" transform="translate(-81.453125,81.453125)" class="label-container" points="81.453125,0 162.90625,-81.453125 81.453125,-162.90625 0,-81.453125"/><g transform="translate(-55.203125, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="110.40625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">是否有Journey?</span></div></foreignObject></g></g><g transform="translate(958.576171875, 548.40625)" id="flowchart-JourneyLLM-1813" class="node default default flowchart-label"><rect height="101" width="228.765625" y="-50.5" x="-114.3828125" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-106.8828125, -43)" style="" class="label"><rect/><foreignObject height="86" width="213.765625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用1: Journey节点选择<br />JourneyNodeSelectionSchema<br />判断Journey是否适用<br />选择下一个步骤</span></div></foreignObject></g></g><g transform="translate(502.076171875, 667.65625)" id="flowchart-GuidelineMatch-1815" class="node default default flowchart-label"><rect height="37.5" width="121.9921875" y="-18.75" x="-60.99609375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-53.49609375, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="106.9921875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Guidelines匹配</span></div></foreignObject></g></g><g transform="translate(502.076171875, 755.15625)" id="flowchart-BatchSelect-1819" class="node default default flowchart-label"><rect height="37.5" width="233.9921875" y="-18.75" x="-116.99609375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-109.49609375, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="218.9921875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">根据Guidelines类型选择批处理</span></div></foreignObject></g></g><g transform="translate(99.0234375, 863.15625)" id="flowchart-ObsBatch-1821" class="node default default flowchart-label"><rect height="78.5" width="198.046875" y="-39.25" x="-99.0234375" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-91.5234375, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="183.046875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用2a: 观察性批处理<br />ObservationalBatch<br />判断条件是否满足</span></div></foreignObject></g></g><g transform="translate(348.21875, 863.15625)" id="flowchart-ActionBatch-1823" class="node default default flowchart-label"><rect height="78.5" width="200.34375" y="-39.25" x="-100.171875" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-92.671875, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="185.34375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用2b: 可执行批处理<br />GuidelineActionableBatch<br />匹配可执行的指南</span></div></foreignObject></g></g><g transform="translate(661.62109375, 863.15625)" id="flowchart-PrevAppliedBatch-1825" class="node default default flowchart-label"><rect height="78.5" width="326.4609375" y="-39.25" x="-163.23046875" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-155.73046875, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="311.4609375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用2c: 之前应用过的批处理<br />GuidelinePreviouslyAppliedActionableBatch<br />检查是否需要重复执行</span></div></foreignObject></g></g><g transform="translate(966.12890625, 863.15625)" id="flowchart-DisamBatch-1827" class="node default default flowchart-label"><rect height="78.5" width="182.5546875" y="-39.25" x="-91.27734375" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-83.77734375, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="167.5546875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用2d: 消歧批处理<br />DisambiguationBatch<br />处理歧义情况</span></div></foreignObject></g></g><g transform="translate(504.919921875, 1075.08984375)" id="flowchart-ToolCheck-1829" class="node default default flowchart-label"><polygon style="" transform="translate(-122.68359375,122.68359375)" class="label-container" points="122.68359375,0 245.3671875,-122.68359375 122.68359375,-245.3671875 0,-122.68359375"/><g transform="translate(-96.43359375, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="192.8671875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">是否有工具相关Guidelines?</span></div></foreignObject></g></g><g transform="translate(779.669921875, 1332.0234375)" id="flowchart-ToolLLM-1838" class="node default default flowchart-label"><rect height="123.5" width="231.7578125" y="-61.75" x="-115.87890625" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-108.37890625, -54.25)" style="" class="label"><rect/><foreignObject height="108.5" width="216.7578125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用3: 工具调用决策<br />SingleToolBatchSchema或<br />OverlappingToolsBatchSchema<br />评估工具是否适用<br />验证参数有效性</span></div></foreignObject></g></g><g transform="translate(535.109375, 1994.2734375)" id="flowchart-MessageGen-1840" class="node default default flowchart-label"><rect height="37.5" width="111" y="-18.75" x="-55.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-48, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="96"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">消息生成阶段</span></div></foreignObject></g></g><g transform="translate(779.669921875, 1504.9609375)" id="flowchart-ToolExec-1842" class="node default default flowchart-label"><polygon style="" transform="translate(-61.1875,61.1875)" class="label-container" points="61.1875,0 122.375,-61.1875 61.1875,-122.375 0,-61.1875"/><g transform="translate(-34.9375, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="69.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">执行工具?</span></div></foreignObject></g></g><g transform="translate(985.173828125, 1657.3984375)" id="flowchart-RunTool-1844" class="node default default flowchart-label"><rect height="37.5" width="111" y="-18.75" x="-55.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-48, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="96"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">执行工具调用</span></div></foreignObject></g></g><g transform="translate(1064.015625, 1825.8359375)" id="flowchart-IterCheck-1848" class="node default default flowchart-label"><polygon style="" transform="translate(-77.1875,77.1875)" class="label-container" points="77.1875,0 154.375,-77.1875 77.1875,-154.375 0,-77.1875"/><g transform="translate(-50.9375, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="101.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">需要更多迭代?</span></div></foreignObject></g></g><g transform="translate(535.109375, 2185.828125)" id="flowchart-CannedCheck-1855" class="node default default flowchart-label"><polygon style="" transform="translate(-122.8046875,122.8046875)" class="label-container" points="122.8046875,0 245.609375,-122.8046875 122.8046875,-245.609375 0,-122.8046875"/><g transform="translate(-96.5546875, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="193.109375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">是否启用Canned Response?</span></div></foreignObject></g></g><g transform="translate(400.7734375, 2420.3828125)" id="flowchart-CannedDraft-1857" class="node default default flowchart-label"><rect height="78.5" width="257.28125" y="-39.25" x="-128.640625" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-121.140625, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="242.28125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用4a: 起草Canned Response<br />CannedResponseDraftSchema<br />基于上下文起草回复</span></div></foreignObject></g></g><g transform="translate(752.53125, 2872.2578125)" id="flowchart-DirectMessage-1859" class="node default default flowchart-label"><rect height="78.5" width="191" y="-39.25" x="-95.5" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-88, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="176"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用5: 直接消息生成<br />MessageGenerator<br />基于所有上下文生成回复</span></div></foreignObject></g></g><g transform="translate(400.7734375, 2548.8828125)" id="flowchart-CannedSelect-1861" class="node default default flowchart-label"><rect height="78.5" width="257.7890625" y="-39.25" x="-128.89453125" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-121.39453125, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="242.7890625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用4b: 选择Canned Response<br />CannedResponseSelectionSchema<br />从候选回复中选择最佳</span></div></foreignObject></g></g><g transform="translate(400.7734375, 2699.3203125)" id="flowchart-CannedRevise-1863" class="node default default flowchart-label"><polygon style="" transform="translate(-61.1875,61.1875)" class="label-container" points="61.1875,0 122.375,-61.1875 61.1875,-122.375 0,-61.1875"/><g transform="translate(-34.9375, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="69.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">需要修订?</span></div></foreignObject></g></g><g transform="translate(483.859375, 2872.2578125)" id="flowchart-CannedCompose-1865" class="node default default flowchart-label"><rect height="78.5" width="246.34375" y="-39.25" x="-123.171875" ry="0" rx="0" style="fill:#ffd;stroke:#333;stroke-width:2px;" class="basic label-container"/><g transform="translate(-115.671875, -31.75)" style="" class="label"><rect/><foreignObject height="63.5" width="231.34375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM调用4c: 组合修订<br />CannedResponseRevisionSchema<br />优化和修订回复</span></div></foreignObject></g></g><g transform="translate(483.859375, 2980.2578125)" id="flowchart-FinalMessage-1867" class="node default default flowchart-label"><rect height="37.5" width="111" y="-18.75" x="-55.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-48, -11.25)" style="" class="label"><rect/><foreignObject height="22.5" width="96"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">最终消息输出</span></div></foreignObject></g></g></g></g></g></svg>